{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///Users/valuedcustomer/Desktop/Big%20Jumps%204%20Tods/big-jumps-4-tods/app/api/requests/route.js"],"sourcesContent":["import axios from 'axios';\n\n// Helper: convert frontend time fields to ISO timestamp\nfunction convertToISO(dateStr, hourStr, minuteStr, ampm) {\n  if (!hourStr || !minuteStr || !ampm) return null;\n\n  let hour = parseInt(hourStr, 10);\n  const minute = parseInt(minuteStr, 10);\n\n  if (ampm === 'PM' && hour !== 12) hour += 12;\n  if (ampm === 'AM' && hour === 12) hour = 0;\n\n  const [year, month, day] = dateStr.split('-').map(Number);\n  const date = new Date(year, month - 1, day, hour, minute);\n\n  return date.toISOString();\n}\n\nexport async function POST(req) {\n  try {\n    const data = await req.json();\n\n    // Convert time fields\n    const party_start_time = convertToISO(data.partyDate, data.startHour, data.startMinute, data.startAMPM);\n    const party_end_time = convertToISO(data.partyDate, data.endHour, data.endMinute, data.endAMPM);\n\n    // Validate required fields\n    const missing = [];\n    ['firstName','lastName','phone','email','partyAddress','package'].forEach(f => {\n      if (!data[f]) missing.push(f);\n    });\n    if (!party_start_time || !party_end_time) missing.push('party_start_time / party_end_time');\n    if (missing.length > 0) {\n      return new Response(JSON.stringify({ error: `Missing required fields: ${missing.join(', ')}` }), { status: 400 });\n    }\n\n    // Prepare payload for Express backend\n    const payload = {\n      first_name: data.firstName,\n      last_name: data.lastName,\n      phone: data.phone,\n      email: data.email,\n      party_date: data.partyDate,\n      party_address: data.partyAddress,\n      address_line2: data.addressLine2 || '',\n      message: data.message || '',\n      theme: data.theme || '',\n      referral: data.referral || '',\n      package: data.package,\n      party_start_time,\n      party_end_time\n    };\n\n    // Send to Express backend\n    const res = await axios.post('http://localhost:3001/requests', payload);\n\n    return new Response(JSON.stringify(res.data), {\n      status: 201,\n      headers: { 'Content-Type': 'application/json' }\n    });\n\n  } catch (err) {\n    const errorMsg = err.response?.data || { error: 'Request submission failed' };\n    return new Response(JSON.stringify(errorMsg), {\n      status: err.response?.status || 500,\n      headers: { 'Content-Type': 'application/json' }\n    });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,wDAAwD;AACxD,SAAS,aAAa,OAAO,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI;IACrD,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,MAAM,OAAO;IAE5C,IAAI,OAAO,SAAS,SAAS;IAC7B,MAAM,SAAS,SAAS,WAAW;IAEnC,IAAI,SAAS,QAAQ,SAAS,IAAI,QAAQ;IAC1C,IAAI,SAAS,QAAQ,SAAS,IAAI,OAAO;IAEzC,MAAM,CAAC,MAAM,OAAO,IAAI,GAAG,QAAQ,KAAK,CAAC,KAAK,GAAG,CAAC;IAClD,MAAM,OAAO,IAAI,KAAK,MAAM,QAAQ,GAAG,KAAK,MAAM;IAElD,OAAO,KAAK,WAAW;AACzB;AAEO,eAAe,KAAK,GAAG;IAC5B,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,sBAAsB;QACtB,MAAM,mBAAmB,aAAa,KAAK,SAAS,EAAE,KAAK,SAAS,EAAE,KAAK,WAAW,EAAE,KAAK,SAAS;QACtG,MAAM,iBAAiB,aAAa,KAAK,SAAS,EAAE,KAAK,OAAO,EAAE,KAAK,SAAS,EAAE,KAAK,OAAO;QAE9F,2BAA2B;QAC3B,MAAM,UAAU,EAAE;QAClB;YAAC;YAAY;YAAW;YAAQ;YAAQ;YAAe;SAAU,CAAC,OAAO,CAAC,CAAA;YACxE,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,QAAQ,IAAI,CAAC;QAC7B;QACA,IAAI,CAAC,oBAAoB,CAAC,gBAAgB,QAAQ,IAAI,CAAC;QACvD,IAAI,QAAQ,MAAM,GAAG,GAAG;YACtB,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;gBAAE,OAAO,CAAC,yBAAyB,EAAE,QAAQ,IAAI,CAAC,OAAO;YAAC,IAAI;gBAAE,QAAQ;YAAI;QACjH;QAEA,sCAAsC;QACtC,MAAM,UAAU;YACd,YAAY,KAAK,SAAS;YAC1B,WAAW,KAAK,QAAQ;YACxB,OAAO,KAAK,KAAK;YACjB,OAAO,KAAK,KAAK;YACjB,YAAY,KAAK,SAAS;YAC1B,eAAe,KAAK,YAAY;YAChC,eAAe,KAAK,YAAY,IAAI;YACpC,SAAS,KAAK,OAAO,IAAI;YACzB,OAAO,KAAK,KAAK,IAAI;YACrB,UAAU,KAAK,QAAQ,IAAI;YAC3B,SAAS,KAAK,OAAO;YACrB;YACA;QACF;QAEA,0BAA0B;QAC1B,MAAM,MAAM,MAAM,kJAAK,CAAC,IAAI,CAAC,kCAAkC;QAE/D,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC,IAAI,IAAI,GAAG;YAC5C,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;QAChD;IAEF,EAAE,OAAO,KAAK;QACZ,MAAM,WAAW,IAAI,QAAQ,EAAE,QAAQ;YAAE,OAAO;QAA4B;QAC5E,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC,WAAW;YAC5C,QAAQ,IAAI,QAAQ,EAAE,UAAU;YAChC,SAAS;gBAAE,gBAAgB;YAAmB;QAChD;IACF;AACF"}}]
}